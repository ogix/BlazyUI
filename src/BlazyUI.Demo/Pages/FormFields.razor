@page "/formfields"

<PageTitle>FormField - BlazyUI</PageTitle>

<h1 class="text-3xl font-bold mb-8">FormField</h1>

<p class="mb-8 text-base-content/70">
    The FormField component provides a convenient wrapper that combines Label and FieldValidator components,
    making it easy to create consistent form layouts with built-in validation support.
</p>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">Basic Usage</h2>
    <p class="mb-4 text-sm text-base-content/70">Wrap any input with FormField to add a label and validation.</p>
    <CodeExample Code="@basicCode">
        <form class="max-w-sm flex flex-col gap-4">
            <BlazyFormField Label="Email" For="@(() => basicEmail)" Hint="Please enter a valid email">
                <BlazyTextInput @bind-Value="basicEmail" Type="email" placeholder="Enter your email" required />
            </BlazyFormField>
            <BlazyButton Type="submit" Color="BlazyButtonColor.Primary">Submit</BlazyButton>
        </form>
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">With Blazor EditForm</h2>
    <p class="mb-4 text-sm text-base-content/70">Combine with EditForm for full validation support including data annotations.</p>
    <CodeExample Code="@editFormCode">
        <EditForm Model="@formModel" OnValidSubmit="@HandleValidSubmit" class="max-w-sm flex flex-col gap-4">
            <DataAnnotationsValidator />

            <BlazyFormField Label="Email"
                       For="@(() => formModel.Email)"
                       Hint="Invalid email format"
                       Required>
                <BlazyTextInput @bind-Value="formModel.Email" Type="email" placeholder="Email" required />
            </BlazyFormField>

            <BlazyFormField Label="Password"
                       For="@(() => formModel.Password)"
                       Hint="Password is required"
                       Required>
                <BlazyTextInput @bind-Value="formModel.Password" Type="password" placeholder="Password" required minlength="6" />
            </BlazyFormField>

            <BlazyFormField Label="Bio"
                       For="@(() => formModel.Bio)"
                       HelperText="Tell us a bit about yourself">
                <BlazyTextarea @bind-Value="formModel.Bio" placeholder="Your bio..." rows="3" />
            </BlazyFormField>

            <BlazyButton Type="submit" Color="BlazyButtonColor.Primary" Block>Sign Up</BlazyButton>
        </EditForm>
        @if (formSubmitted)
        {
            <BlazyAlert Color="BlazyAlertColor.Success" class="mt-4">Form submitted successfully!</BlazyAlert>
        }
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">With Helper Text</h2>
    <p class="mb-4 text-sm text-base-content/70">Add helper text that's always visible below the input.</p>
    <CodeExample Code="@helperTextCode">
        <div class="max-w-sm flex flex-col gap-4">
            <BlazyFormField Label="Username"
                       For="@(() => username)"
                       HelperText="Choose a unique username (3-20 characters)"
                       Hint="Username must be 3-20 characters">
                <BlazyTextInput @bind-Value="username" placeholder="Username" required minlength="3" maxlength="20" />
            </BlazyFormField>

            <BlazyFormField Label="Website"
                       For="@(() => website)"
                       HelperText="Optional: Your personal website or portfolio">
                <BlazyTextInput @bind-Value="website" Type="url" placeholder="https://example.com" />
            </BlazyFormField>
        </div>
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">With Select</h2>
    <p class="mb-4 text-sm text-base-content/70">FormField works with any input component including Select.</p>
    <CodeExample Code="@selectCode">
        <div class="max-w-sm flex flex-col gap-4">
            <BlazyFormField Label="Country"
                       For="@(() => selectedCountry)"
                       Hint="Please select a country"
                       Required>
                <BlazySelect @bind-Value="selectedCountry" required>
                    <option value="">Choose a country...</option>
                    <option value="US">United States</option>
                    <option value="UK">United Kingdom</option>
                    <option value="CA">Canada</option>
                    <option value="AU">Australia</option>
                </BlazySelect>
            </BlazyFormField>

            <BlazyFormField Label="Language"
                       For="@(() => selectedLanguage)"
                       HelperText="Select your preferred language">
                <BlazySelect @bind-Value="selectedLanguage">
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                </BlazySelect>
            </BlazyFormField>
        </div>
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">With Checkbox and Toggle</h2>
    <p class="mb-4 text-sm text-base-content/70">FormField also works with Checkbox and Toggle components.</p>
    <CodeExample Code="@checkboxCode">
        <div class="max-w-sm flex flex-col gap-4">
            <BlazyFormField Label="Email notifications"
                       For="@(() => emailNotifications)"
                       Orientation="BlazyFormFieldOrientation.Horizontal">
                <BlazyCheckbox @bind-Value="emailNotifications" Color="BlazyCheckboxColor.Primary" />
            </BlazyFormField>

            <BlazyFormField Label="Dark Mode"
                       For="@(() => darkMode)"
                       Orientation="BlazyFormFieldOrientation.Horizontal"
                       HelperText="Enable dark mode for the interface">
                <BlazyToggle @bind-Value="darkMode" Color="BlazyToggleColor.Primary" />
            </BlazyFormField>
        </div>
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">Validation Modes</h2>
    <p class="mb-4 text-sm text-base-content/70">Control which validation feedback is shown.</p>
    <CodeExample Code="@validationModesCode">
        <div class="max-w-sm flex flex-col gap-4">
            <BlazyFormField Label="HTML5 Only"
                       For="@(() => html5OnlyValue)"
                       ValidationMode="BlazyFieldValidatorMode.Html5Only"
                       Hint="This field is required">
                <BlazyTextInput @bind-Value="html5OnlyValue" placeholder="HTML5 validation only" required />
            </BlazyFormField>

            <EditForm Model="@modeModel" class="contents">
                <DataAnnotationsValidator />
                <BlazyFormField Label="Blazor Only"
                           ValidationMode="BlazyFieldValidatorMode.BlazorOnly"
                           For="@(() => modeModel.Value)">
                    <BlazyTextInput @bind-Value="modeModel.Value" placeholder="Blazor validation only" />
                </BlazyFormField>
            </EditForm>
        </div>
    </CodeExample>
</section>

<section class="mb-12">
    <h2 class="text-xl font-semibold mb-4">Complete Form Example</h2>
    <p class="mb-4 text-sm text-base-content/70">A complete form demonstrating various FormField configurations.</p>
    <CodeExample Code="@completeFormCode">
        <EditForm Model="@contactModel" OnValidSubmit="@HandleContactSubmit" class="max-w-md flex flex-col gap-4">
            <DataAnnotationsValidator />

            <div class="grid grid-cols-2 gap-4">
                <BlazyFormField Label="First Name"
                           For="@(() => contactModel.FirstName)"
                           Hint="Required"
                           Required>
                    <BlazyTextInput @bind-Value="contactModel.FirstName" placeholder="John" required />
                </BlazyFormField>

                <BlazyFormField Label="Last Name"
                           For="@(() => contactModel.LastName)"
                           Hint="Required"
                           Required>
                    <BlazyTextInput @bind-Value="contactModel.LastName" placeholder="Doe" required />
                </BlazyFormField>
            </div>

            <BlazyFormField Label="Email Address"
                       For="@(() => contactModel.Email)"
                       Hint="Invalid email format"
                       Required>
                <BlazyTextInput @bind-Value="contactModel.Email" Type="email" placeholder="john@example.com" required />
            </BlazyFormField>

            <BlazyFormField Label="Phone Number"
                       For="@(() => contactModel.Phone)"
                       HelperText="Optional">
                <BlazyTextInput @bind-Value="contactModel.Phone" Type="tel" placeholder="+1 (555) 000-0000" />
            </BlazyFormField>

            <BlazyFormField Label="Message"
                       For="@(() => contactModel.Message)"
                       Hint="Please enter your message"
                       Required>
                <BlazyTextarea @bind-Value="contactModel.Message" placeholder="Your message..." rows="4" required />
            </BlazyFormField>

            <BlazyButton Type="submit" Color="BlazyButtonColor.Primary" Block>Send Message</BlazyButton>
        </EditForm>
        @if (contactSubmitted)
        {
            <BlazyAlert Color="BlazyAlertColor.Success" class="mt-4">Message sent successfully!</BlazyAlert>
        }
    </CodeExample>
</section>

@code {
    private string basicEmail = "";
    private string username = "";
    private string website = "";
    private string selectedCountry = "";
    private string selectedLanguage = "en";
    private bool emailNotifications = true;
    private bool darkMode = false;
    private string html5OnlyValue = "";
    private bool formSubmitted = false;
    private bool contactSubmitted = false;

    private FormModel formModel = new();
    private ModeModel modeModel = new();
    private ContactModel contactModel = new();

    private void HandleValidSubmit()
    {
        formSubmitted = true;
    }

    private void HandleContactSubmit()
    {
        contactSubmitted = true;
    }

    private class FormModel
    {
        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Email is required")]
        [System.ComponentModel.DataAnnotations.EmailAddress(ErrorMessage = "Invalid email format")]
        public string Email { get; set; } = "";

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Password is required")]
        [System.ComponentModel.DataAnnotations.MinLength(6, ErrorMessage = "Password must be at least 6 characters")]
        public string Password { get; set; } = "";

        public string Bio { get; set; } = "";
    }

    private class ModeModel
    {
        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "This field is required")]
        public string Value { get; set; } = "";
    }

    private class ContactModel
    {
        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "First name is required")]
        public string FirstName { get; set; } = "";

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Last name is required")]
        public string LastName { get; set; } = "";

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Email is required")]
        [System.ComponentModel.DataAnnotations.EmailAddress(ErrorMessage = "Invalid email format")]
        public string Email { get; set; } = "";

        public string Phone { get; set; } = "";

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Message is required")]
        public string Message { get; set; } = "";
    }

    private string basicCode = @"<form class=""flex flex-col gap-4"">
    <BlazyFormField Label=""Email"" For=""@(() => email)"" Hint=""Please enter a valid email"">
        <BlazyTextInput @bind-Value=""email"" Type=""email"" placeholder=""Enter your email"" required />
    </BlazyFormField>
    <BlazyButton Type=""submit"">Submit</BlazyButton>
</form>";

    private string editFormCode = @"<EditForm Model=""@model"" OnValidSubmit=""@HandleSubmit"" class=""flex flex-col gap-4"">
    <DataAnnotationsValidator />

    <BlazyFormField Label=""Email""
               For=""@(() => model.Email)""
               Hint=""Invalid email format""
               Required>
        <BlazyTextInput @bind-Value=""model.Email"" Type=""email"" placeholder=""Email"" required />
    </BlazyFormField>

    <BlazyFormField Label=""Password""
               For=""@(() => model.Password)""
               Hint=""Password is required""
               Required>
        <BlazyTextInput @bind-Value=""model.Password"" Type=""password"" placeholder=""Password"" required />
    </BlazyFormField>

    <BlazyFormField Label=""Bio""
               For=""@(() => model.Bio)""
               HelperText=""Tell us a bit about yourself"">
        <BlazyTextarea @bind-Value=""model.Bio"" placeholder=""Your bio..."" />
    </BlazyFormField>

    <BlazyButton Type=""submit"" Color=""BlazyButtonColor.Primary"">Sign Up</BlazyButton>
</EditForm>";

    private string helperTextCode = @"<BlazyFormField Label=""Username""
           For=""@(() => username)""
           HelperText=""Choose a unique username (3-20 characters)""
           Hint=""Username must be 3-20 characters"">
    <BlazyTextInput @bind-Value=""username"" placeholder=""Username"" required minlength=""3"" maxlength=""20"" />
</BlazyFormField>

<BlazyFormField Label=""Website""
           For=""@(() => website)""
           HelperText=""Optional: Your personal website or portfolio"">
    <BlazyTextInput @bind-Value=""website"" Type=""url"" placeholder=""https://example.com"" />
</BlazyFormField>";

    private string selectCode = @"<BlazyFormField Label=""Country""
           For=""@(() => country)""
           Hint=""Please select a country""
           Required>
    <BlazySelect @bind-Value=""country"" required>
        <option value="""">Choose a country...</option>
        <option value=""US"">United States</option>
        <option value=""UK"">United Kingdom</option>
    </BlazySelect>
</BlazyFormField>";

    private string checkboxCode = @"<BlazyFormField Label=""Email notifications""
           For=""@(() => notifications)""
           Orientation=""BlazyFormFieldOrientation.Horizontal"">
    <BlazyCheckbox @bind-Value=""notifications"" Color=""BlazyCheckboxColor.Primary"" />
</BlazyFormField>

<BlazyFormField Label=""Dark Mode""
           For=""@(() => darkMode)""
           Orientation=""BlazyFormFieldOrientation.Horizontal""
           HelperText=""Enable dark mode for the interface"">
    <BlazyToggle @bind-Value=""darkMode"" Color=""BlazyToggleColor.Primary"" />
</BlazyFormField>";

    private string validationModesCode = @"<BlazyFormField Label=""HTML5 Only""
           For=""@(() => html5Value)""
           ValidationMode=""BlazyFieldValidatorMode.Html5Only""
           Hint=""This field is required"">
    <BlazyTextInput @bind-Value=""html5Value"" placeholder=""HTML5 validation only"" required />
</BlazyFormField>

<BlazyFormField Label=""Blazor Only""
           For=""@(() => model.Value)""
           ValidationMode=""BlazyFieldValidatorMode.BlazorOnly"">
    <BlazyTextInput @bind-Value=""model.Value"" placeholder=""Blazor validation only"" />
</BlazyFormField>";

    private string completeFormCode = @"<EditForm Model=""@model"" OnValidSubmit=""@HandleSubmit"" class=""flex flex-col gap-4"">
    <DataAnnotationsValidator />

    <div class=""grid grid-cols-2 gap-4"">
        <BlazyFormField Label=""First Name"" For=""@(() => model.FirstName)"" Required>
            <BlazyTextInput @bind-Value=""model.FirstName"" placeholder=""John"" required />
        </BlazyFormField>
        <BlazyFormField Label=""Last Name"" For=""@(() => model.LastName)"" Required>
            <BlazyTextInput @bind-Value=""model.LastName"" placeholder=""Doe"" required />
        </BlazyFormField>
    </div>

    <BlazyFormField Label=""Email"" For=""@(() => model.Email)"" Required>
        <BlazyTextInput @bind-Value=""model.Email"" Type=""email"" placeholder=""john@example.com"" required />
    </BlazyFormField>

    <BlazyFormField Label=""Phone"" For=""@(() => model.Phone)"" HelperText=""Optional"">
        <BlazyTextInput @bind-Value=""model.Phone"" Type=""tel"" placeholder=""+1 (555) 000-0000"" />
    </BlazyFormField>

    <BlazyFormField Label=""Message"" For=""@(() => model.Message)"" Required>
        <BlazyTextarea @bind-Value=""model.Message"" placeholder=""Your message..."" required />
    </BlazyFormField>

    <BlazyButton Type=""submit"" Color=""BlazyButtonColor.Primary"" Block>Send Message</BlazyButton>
</EditForm>";
}
