@namespace BlazyUI
@inherits BlazyInputBase<bool>

<input type="checkbox"
       @attributes="AdditionalAttributes"
       id="@GetFieldId()"
       name="@GetFieldName()"
       class="@ComputedCssClass"
       checked="@CurrentValue"
       value="true"
       disabled="@Disabled"
       @onchange="EventCallback.Factory.CreateBinder<bool>(this, __value => CurrentValue = __value, CurrentValue)" />

@code {
    /// <summary>
    /// The size of the checkbox.
    /// </summary>
    [Parameter]
    public BlazyCheckboxSize Size { get; set; } = BlazyCheckboxSize.Medium;

    /// <summary>
    /// The color of the checkbox.
    /// </summary>
    [Parameter]
    public BlazyCheckboxColor Color { get; set; } = BlazyCheckboxColor.Default;

    /// <inheritdoc />
    protected override string GetErrorColorClass() => "checkbox-error";

    /// <inheritdoc />
    protected override bool TryParseValueFromString(
        string? value,
        [System.Diagnostics.CodeAnalysis.NotNullWhen(true)] out bool result,
        [System.Diagnostics.CodeAnalysis.NotNullWhen(false)] out string? validationErrorMessage)
        => throw new NotSupportedException($"This component does not parse string inputs. Bind to the '{nameof(CurrentValue)}' property, not '{nameof(CurrentValueAsString)}'.");

    private string ComputedCssClass => MergeClasses(
        "checkbox",
        SizeClass,
        ColorClass
    );

    private string SizeClass => Size switch
    {
        BlazyCheckboxSize.ExtraSmall => "checkbox-xs",
        BlazyCheckboxSize.Small => "checkbox-sm",
        BlazyCheckboxSize.Medium => "checkbox-md",
        BlazyCheckboxSize.Large => "checkbox-lg",
        BlazyCheckboxSize.ExtraLarge => "checkbox-xl",
        _ => throw new ArgumentOutOfRangeException(nameof(Size), Size, null)
    };

    private string? ColorClass => Color switch
    {
        BlazyCheckboxColor.Default => null,
        BlazyCheckboxColor.Neutral => "checkbox-neutral",
        BlazyCheckboxColor.Primary => "checkbox-primary",
        BlazyCheckboxColor.Secondary => "checkbox-secondary",
        BlazyCheckboxColor.Accent => "checkbox-accent",
        BlazyCheckboxColor.Info => "checkbox-info",
        BlazyCheckboxColor.Success => "checkbox-success",
        BlazyCheckboxColor.Warning => "checkbox-warning",
        BlazyCheckboxColor.Error => "checkbox-error",
        _ => throw new ArgumentOutOfRangeException(nameof(Color), Color, null)
    };
}
