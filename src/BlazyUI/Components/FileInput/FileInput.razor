@namespace BlazyUI
@inherits BlazyComponentBase

<InputFile class="@ComputedCssClass"
           OnChange="@OnChange"
           multiple="@Multiple"
           accept="@Accept"
           @attributes="AdditionalAttributes" />

@code {
    /// <summary>
    /// Event callback when files are selected.
    /// </summary>
    [Parameter]
    public EventCallback<InputFileChangeEventArgs> OnChange { get; set; }

    /// <summary>
    /// Whether multiple files can be selected.
    /// </summary>
    [Parameter]
    public bool Multiple { get; set; }

    /// <summary>
    /// The accepted file types (e.g., ".jpg,.png" or "image/*").
    /// </summary>
    [Parameter]
    public string? Accept { get; set; }

    /// <summary>
    /// The size of the file input.
    /// </summary>
    [Parameter]
    public FileInputSize Size { get; set; } = FileInputSize.Default;

    /// <summary>
    /// The color of the file input.
    /// </summary>
    [Parameter]
    public FileInputColor Color { get; set; } = FileInputColor.Default;

    /// <summary>
    /// Whether to use the ghost style (no background).
    /// </summary>
    [Parameter]
    public bool Ghost { get; set; }

    /// <summary>
    /// Whether the file input has a bordered style.
    /// </summary>
    [Parameter]
    public bool Bordered { get; set; }

    private string ComputedCssClass => MergeClasses(
        "file-input",
        Bordered ? "file-input-bordered" : null,
        Ghost ? "file-input-ghost" : null,
        SizeClass,
        ColorClass
    );

    private string? SizeClass => Size switch
    {
        FileInputSize.Default => null,
        FileInputSize.ExtraSmall => "file-input-xs",
        FileInputSize.Small => "file-input-sm",
        FileInputSize.Medium => "file-input-md",
        FileInputSize.Large => "file-input-lg",
        FileInputSize.ExtraLarge => "file-input-xl",
        _ => throw new ArgumentOutOfRangeException(nameof(Size), Size, null)
    };

    private string? ColorClass => Color switch
    {
        FileInputColor.Default => null,
        FileInputColor.Neutral => "file-input-neutral",
        FileInputColor.Primary => "file-input-primary",
        FileInputColor.Secondary => "file-input-secondary",
        FileInputColor.Accent => "file-input-accent",
        FileInputColor.Info => "file-input-info",
        FileInputColor.Success => "file-input-success",
        FileInputColor.Warning => "file-input-warning",
        FileInputColor.Error => "file-input-error",
        _ => throw new ArgumentOutOfRangeException(nameof(Color), Color, null)
    };
}
