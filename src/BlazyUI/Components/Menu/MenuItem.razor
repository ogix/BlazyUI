@namespace BlazyUI
@inherits BlazyComponentBase

<li class="@LiCssClass">
    @if (!string.IsNullOrEmpty(Href))
    {
        <a href="@Href"
           class="@ItemCssClass"
           aria-current="@(Active ? "page" : null)"
           aria-disabled="@(Disabled ? "true" : null)"
           tabindex="@(Disabled ? -1 : null)"
           @onclick="HandleClick"
           @onclick:preventDefault="@Disabled"
           @attributes="AdditionalAttributes">
            @ChildContent
        </a>
    }
    else
    {
        @ChildContent
    }
</li>

@code {
    [Parameter]
    public string? Href { get; set; }

    [Parameter]
    public bool Active { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    private string LiCssClass => Disabled ? "disabled" : string.Empty;

    private string ItemCssClass => MergeClasses(
        Active ? "menu-active" : null,
        Disabled ? "menu-disabled" : null
    );

    private async Task HandleClick(MouseEventArgs args)
    {
        if (!Disabled && OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(args);
        }
    }
}
